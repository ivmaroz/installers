# Скрипты установки приложений для мониторинга и уведомлений

Набор скриптов для установки и базовой настройки различных приложений в системе Ubuntu

Для работы скрипта необходимы приложения `curl`, `wget`, `jq`, которые будут установлены при их отсутствии

## prometheus.sh

Скрипт устанавливает или обновляет до последней версии [Prometheus](https://prometheus.io/) со страницы https://github.com/prometheus/prometheus/releases,
создает базовую конфигурацию, настраивает и запускает службу

Команда запуска

```shell
[VERSION=<version>] [OS=<os>] [ARCH=<architecture>] ./prometheus.sh
```

Где:
* `VERSION` - версия для установки. При отсутствии устанавливается последняя версия
* `OS` - тип операционной системы (`linux`, `darwin` и т.д, соответствует ОС в ссылках на скачивание). При отсутствии определяется автоматически
* `ARCH` - архитектура системы (`amd64`, `386`  и т.д, соответствует архитектуре в ссылках на скачивание). При отсутствии определяется автоматически

Корректность установки можно проверить просмотром статуса сервиса `prometheus.service` и открытием страницы по адресу http://127.0.0.1:9090

```shell
systemctl status prometheus.service
```

## alertmanager.sh

Скрипт устанавливает или обновляет до последней версии [Alertmanager](https://prometheus.io/docs/alerting/latest/alertmanager/) со страницы https://github.com/prometheus/alertmanager/releases, 
создает базовую конфигурацию, настраивает и запускает службу 

Команда запуска

```shell
[VERSION=<version>] [OS=<os>] [ARCH=<architecture>] ./alertmanager.sh
```

Где:
* `VERSION` - версия для установки. При отсутствии устанавливается последняя версия
* `OS` - тип операционной системы (`linux`, `darwin` и т.д, соответствует ОС в ссылках на скачивание). При отсутствии определяется автоматически
* `ARCH` - архитектура системы (`amd64`, `386`  и т.д, соответствует архитектуре в ссылках на скачивание). При отсутствии определяется автоматически

Корректность установки можно проверить просмотром статуса сервиса `alertmanager.service` и открытием страницы по адресу http://127.0.0.1:9093 

```shell
systemctl status alertmanager.service
```

## victoriametrics.sh

Скрипт устанавливает или обновляет до последней версии [VictoriaMetrics](https://victoriametrics.com/) со страницы https://github.com/VictoriaMetrics/VictoriaMetrics/releases,
создает базовую конфигурацию, настраивает и запускает службу

Команда запуска

```shell
[VERSION=<version>] [OS=<os>] [ARCH=<architecture>] ./victoriametrics.sh
```

Где:
* `VERSION` - версия для установки. При отсутствии устанавливается последняя версия
* `OS` - тип операционной системы (`linux`, `darwin` и т.д, соответствует ОС в ссылках на скачивание). При отсутствии определяется автоматически
* `ARCH` - архитектура системы (`amd64`, `386`  и т.д, соответствует архитектуре в ссылках на скачивание). При отсутствии определяется автоматически

Корректность установки можно проверить просмотром статуса сервиса `victoriametrics.service` и открытием страницы по адресу http://127.0.0.1:8428

## vmagent.sh

Скрипт устанавливает или обновляет до последней версии [vmagent](https://docs.victoriametrics.com/vmagent.html) со страницы https://github.com/VictoriaMetrics/VictoriaMetrics/releases,
создает базовую конфигурацию, настраивает и запускает службу

Команда запуска

```shell
[VERSION=<version>] [OS=<os>] [ARCH=<architecture>] ./vmagent.sh
```

Где:
* `VERSION` - версия для установки. При отсутствии устанавливается последняя версия
* `OS` - тип операционной системы (`linux`, `darwin` и т.д, соответствует ОС в ссылках на скачивание). При отсутствии определяется автоматически
* `ARCH` - архитектура системы (`amd64`, `386`  и т.д, соответствует архитектуре в ссылках на скачивание). При отсутствии определяется автоматически

Корректность установки можно проверить просмотром статуса сервиса `victoriametrics.service` и открытием страницы по адресу http://127.0.0.1:8429

## vmalert.sh

Скрипт устанавливает или обновляет до последней версии [vmalert](https://docs.victoriametrics.com/vmalert.html) со страницы https://github.com/VictoriaMetrics/VictoriaMetrics/releases,
создает базовую конфигурацию, настраивает и запускает службу

Команда запуска

```shell
[VERSION=<version>] [OS=<os>] [ARCH=<architecture>] ./vmalert.sh
```

Где:
* `VERSION` - версия для установки. При отсутствии устанавливается последняя версия
* `OS` - тип операционной системы (`linux`, `darwin` и т.д, соответствует ОС в ссылках на скачивание). При отсутствии определяется автоматически
* `ARCH` - архитектура системы (`amd64`, `386`  и т.д, соответствует архитектуре в ссылках на скачивание). При отсутствии определяется автоматически

Корректность установки можно проверить просмотром статуса сервиса `victoriametrics.service` и открытием страницы по адресу http://127.0.0.1:8880